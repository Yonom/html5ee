require({waitSeconds:90});define("config",function(){});define("game/camera",[],function(){function c(b){this.target=b;this.y=this.x=0}c.prototype={aa:function(b){b.save();b.translate(Math.round(this.x),Math.round(this.y))},ba:function(b){b.restore()},j:function(b){this.x-=.0625*(this.x-(-this.target.x+b.width/2));this.y-=.0625*(this.y-(-this.target.y+b.height/2))}};return c});
define("image",[],function(){function c(){}return{load:function(b,h,d,f){var e;f.ra?d(null):(e=new Image,e.onerror=function(a){d.error(a)},e.onload=function(){d(e);try{delete e.onload}catch(a){e.onload=c}},e.src=-1!==b.indexOf("!rel")?h.toUrl(b.replace("!rel","")):b)},normalize:function(b){-1!==b.indexOf("!bust")&&(b=b.replace("!bust",""),b+=0>b.indexOf("?")?"?":"&",b=b+"bust="+Math.round(2147483647*Math.random()));return b}}});
define("utils/draw",["require","image!img/blocks.png","image!img/blocks_bg.png","image!img/blocksforground.png","image!img/Guy.png"],function(c){var b=c("image!img/blocks.png"),h=c("image!img/blocks_bg.png");c("image!img/blocksforground.png");var d=c("image!img/Guy.png");return new function(){this.X=function(c,e,a,d){0!=d.J?c.drawImage(h,d.J-500<<4,0,16,16,e<<4,a<<4,16,16):c.drawImage(b,0,0,16,16,e<<4,a<<4,16,16);0!=d.r&&c.drawImage(b,d.r<<4,0,16,16,e<<4,a<<4,16,16)};this.H=function(b,h){b.drawImage(d,
h.H<<4,0,16,26,Math.round(h.x),Math.round(h.y)-5,16,26)}}});define("ui/canvasworld",["utils/draw"],function(c){function b(b){this.k=b;this.canvas=document.createElement("canvas");this.canvas.width=b.width<<4;this.canvas.height=b.height<<4;this.context=this.canvas.getContext("2d");this.S()}b.prototype={B:function(){this.k.B();this.S()},S:function(){for(var b=0;b<this.k.width;b++)for(var d=0;d<this.k.height;d++)c.X(this.context,b,d,this.k.f[b][d])}};return b});
define("models/block",[],function(){return function(c,b){this.r=c;this.J=b}});define("models/world",["models/block","utils/draw"],function(c){function b(b,d){this.width=b;this.height=d;this.f=Array(2);for(var f=0;f<b;f++){this.f[f]=Array(d);for(var e=0;e<d;e++)this.f[f][e]=new c(0,0)}}b.prototype={B:function(){for(var b=new c(9,0),d=this.width-1,f=this.height-1,e=0;e<=f;e++)this.f[0][e]=b,this.f[d][e]=b;for(e=0;e<=d;e++)this.f[e][0]=b,this.f[e][f]=b}};return b});
define("game/inputhandler",[],function(){function c(){this.d=[];this.update();var b=this;document.addEventListener("keydown",function(c){b.ha(c)},!0);document.addEventListener("keyup",function(c){b.ia(c)},!0)}c.prototype={ha:function(b){this.d[b.keyCode]=!0;this.update()},ia:function(b){this.d[b.keyCode]=!1;this.update()},update:function(){this.left=this.d[37]||this.d[65]||!1;this.right=this.d[39]||this.d[68]||!1;this.oa=this.d[38]||this.d[87]||!1;this.$=this.d[40]||this.d[83]||!1;this.na=this.d[32]||
!1}};return new c});
define("game/physics",["game/inputhandler"],function(c){function b(b){switch(b){default:return!1}}function h(b,a){if(0>a.x||0>a.y||a.x>16*b.width-16||a.y>16*b.height-16)return 1;if(a.M())return 0;for(var c=a.y>>4,d=(a.x+16)/16,h=(a.y+16)/16,k=a.x>>4;k<d;k++)for(var f=b.f[k],q=c;q<h;q++)if(null!=f){var r=f[q].r;if(0!=r)return r}return 0}var d=1.00016093*Math.pow(.9981,10),f=1.00016093*Math.pow(.99,10);return{V:7.752,I:10,U:2,T:.2,Z:function(e,a){var l=e.f[a.x+8>>4][a.y+8>>4].r,g=a.w.shift();a.w.push(l);
if(4==l||414==l||b(l))g=a.w.shift(),a.w.push(l);if(a.D){var m=c.oa,k=c.$,n=c.na;a.l=c.right-c.left;a.A=k-m}a.Q&&(a.l=0,a.A=0,n=!1);if(m=a.M())a.u=0,a.v=0,a.g=0,a.c=0;else{switch(l){case 414:a.u=0;a.v=0;break;default:a.u=0,a.v=2}switch(g){case 414:a.g=0;a.c=0;break;default:a.g=0,a.c=2}}-.5==a.c||.4==a.c||.2==this.c?(a.e=a.l,a.e=a.A):0!=a.c?(a.e=a.l,a.h=0):(0!=a.g?a.e=0:a.e=a.l,a.h=a.A);a.e*=1;a.h*=1;a.g*=a.P;a.c*=a.P;a.ja(a.g+a.e);a.ka(a.c+a.h);if(a.b||0!=a.n){a.b+=a.n;a.b*=d;if(0==a.e&&0!=a.c||0>
a.b&&0<a.e||0<a.b&&0>a.e||b(l)&&!m)a.b*=f;16<a.b?a.b=16:-16>a.b?a.b=-16:1E-4>a.b&&-1E-4<a.b&&(a.b=0)}if(a.a||0!=a.o){a.a+=a.o;a.a*=d;if(0==a.h&&0!=a.g||0>a.a&&0<a.h||0<a.a&&0>a.h||b(l)&&!m)a.a*=f;16<a.a?a.a=16:-16>a.a?a.a=-16:1E-4>a.a&&-1E-4<a.a&&(a.a=0)}l=a.x%1;g=a.b;m=a.y%1;k=a.a;a.K=!1;a.L=!1;for(var q,r,t,u;0!=g&&!a.K||0!=k&&!a.L;)t=a.x,u=a.y,q=g,r=k,0<g?1<=g+l?(a.x+=1-l,a.x=Math.floor(a.x),g-=1-l,l=0):(a.x+=g,g=0):0>g&&(0!=l&&0>l+g?(g+=l,a.x-=l,a.x=Math.floor(a.x),l=1):(a.x+=g,g=0)),h(e,a)&&
(a.x=t,a.b=0,g=q,a.K=!0),0<k?1<=k+m?(a.y+=1-m,a.y=Math.floor(a.y),k-=1-m,m=0):(a.y+=k,k=0):0>k&&(0!=m&&0>m+k?(a.y-=m,a.y=Math.floor(a.y),k+=m,m=1):(a.y+=k,k=0)),h(e,a)&&(a.y=u,a.a=0,k=r,a.L=!0);if(a.D&&!a.Q){if(n)var p=1;l=!1;n?a.C?(a.F||(a.q=!0),a.F=!0,a.Y=.2):0>a.m?750<new Date+a.m&&(l=!0):150<new Date-a.m&&(l=!0):a.C&&(a.F&&(a.q=!0),a.F=!1);l&&!a.C&&(0==a.O()&&a.u&&a.g&&0==a.x%16&&(a.la(a.O()-26*a.u*a.N()),a.q=!0,a.m=new Date*p),0==a.a&&a.v&&a.c&&0==a.y%16&&(a.ma(a.ca()-26*a.v*a.N()),a.q=!0,a.m=
new Date*p));a.q=!1}p=a.b<<8;n=a.a<<8;a.R=!1;0!=p?a.R=!0:.1>a.n&&-.1<a.n&&(p=a.x%16,2>p?a.x=.2>p?a.x>>0:a.x-p/15:14<p&&(15.8<p?(a.x>>=0,a.x++):a.x+=(p-14)/15));0!=n?a.R=!0:.1>a.o&&-.1<a.o&&(n=a.y%16,2>n?a.y=.2>n?a.y>>0:a.y-n/15:14<n&&(15.8<n?(a.y>>=0,a.y++):a.y+=(n-14)/15))}}});
define("models/player",["game/physics"],function(c){function b(){this.w=Array(c.U);this.i=c.V;this.Y=c.T;this.m=0;this.y=this.x=16;this.A=this.l=0;this.Q=!1;this.o=this.n=this.a=this.b=0;this.ea=this.fa=this.da=this.ga=this.pa=this.C=!1;this.P=1;this.D=!1;this.H=0}b.prototype={M:function(){return this.da||this.fa||this.ea},la:function(b){this.b=b/this.i},ma:function(b){this.a=b/this.i},O:function(){return this.b*this.i},ca:function(){return this.a*this.i},ja:function(b){this.n=b/this.i},ka:function(b){this.o=
b/this.i},N:function(){var b=1;this.ga&&(b*=1.2);this.pa&&(b*=.75);return b}};return b});define("models/playercontainer",["models/player","game/physics"],function(c,b){function h(b){this.k=b;this.G=0;this.p=[]}h.prototype={W:function(){this.p.push(new c);return this.p[this.p.length-1]},j:function(c){var f=this;c+=this.G;this.G=c%b.I;c=(c-this.G)/b.I;for(var e=0;e<c;e++)this.p.forEach(function(a){b.Z(f.k,a)})}};return h});
define("utils/ticker",[],function(){return new function(){function c(){var d=new Date,f=d-h;h=d;b.t+=(f-b.t)/10;b.j(f);requestAnimationFrame(c)}var b=this;this.j=function(){};this.t=0;var h=new Date;requestAnimationFrame(c)}});
define("game/playstate","require game/camera ui/canvasworld models/world models/playercontainer utils/draw utils/ticker".split(" "),function(c){var b=c("game/camera"),h=c("ui/canvasworld"),d=c("models/world"),f=c("models/playercontainer"),e=c("utils/draw"),a=c("utils/ticker");return function(c){var g=c.getContext("2d");g.qa=!1;var m=new d(10,10);m.B();var k=new h(m),n=new f(m),m=n.W();m.D=!0;var q=new b(m);a.j=function(a){c.width=c.width;q.j(c);n.j(a);q.aa(g);g.drawImage(k.canvas,0,0);n.p.forEach(function(a){e.H(g,
a)});q.ba(g)}}});require(["game/playstate","utils/ticker"],function(c,b){function h(){d.width=window.innerWidth;d.height=window.innerHeight-50}var d=document.getElementById("canvas");window.onresize=h;h();new c(d);var f=document.getElementById("fps");setInterval(function(){f.innerHTML=(1E3/b.t).toFixed(1)},500)});define("app",function(){});require(["config"],function(){require(["app"])});define("release",function(){});
